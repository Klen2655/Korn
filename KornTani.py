import asyncio
import logging
import os
import requests
from aiogram import Bot, Dispatcher, F
from aiogram.types import Message, ReplyKeyboardMarkup, KeyboardButton
from aiogram.filters import CommandStart
from aiogram.fsm.storage.memory import MemoryStorage

# –í–≤–µ–¥–∏—Ç–µ –≤–∞—à API —Ç–æ–∫–µ–Ω –∑–¥–µ—Å—å
API_TOKEN = "8188228861:AAGyf_-m607R2rQRam6StU-WEymSfqylutg"
ADMIN_API_TOKEN = "8183576793:AAEmHSLcaypuyXkxoeUv5PY8HB2VIQFiL88"
ADMIN_CHAT_ID = "831450026"

# API URL –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—Å–∫–æ–≥–æ –±–æ—Ç–∞
ADMIN_BOT_API_URL = "https://api.telegram.org/bot" + ADMIN_API_TOKEN + "/sendMessage"

# –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
total_users = 0
user_list = []


async def notify_admin(text):
    payload = {
        "chat_id": ADMIN_CHAT_ID,  # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∏–ª–∏ –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ —á–∞—Ç–∞
        "text": text
    }
    try:
        requests.post(ADMIN_BOT_API_URL, data=payload)
    except Exception as e:
        logging.error(f"–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É: {e}")

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
logging.basicConfig(level=logging.INFO)

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞ –∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –≤ –ø–∞–º—è—Ç–∏
bot = Bot(token=API_TOKEN)
storage = MemoryStorage()
dp = Dispatcher(storage=storage)

# –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –º–µ–Ω—é
menu_keyboard = ReplyKeyboardMarkup(
    keyboard=[
        [KeyboardButton(text="–ö—É—Ä—Å ¬´–°–µ–∫—Ä–µ—Ç—ã –∂–µ–Ω—Å–∫–æ–π —Å–∏–ª—ã¬ª")],
        [KeyboardButton(text="–ò–≥—Ä–∞ INTEGRA")],
        [KeyboardButton(text="–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è")],
        [KeyboardButton(text="–û–ø–ª–∞—Ç–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è")],
        [KeyboardButton(text="–ö–æ–Ω—Ç–∞–∫—Ç—ã")]
    ],
    resize_keyboard=True
)

# –ö–Ω–æ–ø–∫–∏ –¥–ª—è –∑–∞–ø–∏—Å–∏ –Ω–∞ —Ä–∞–∑–Ω—ã–µ —É—Å–ª—É–≥–∏
course_keyboard = ReplyKeyboardMarkup(
    keyboard=[[KeyboardButton(text="–ó–∞–ø–∏—Å–∞—Ç—å—Å—è ¬´–°–µ–∫—Ä–µ—Ç—ã –∂–µ–Ω—Å–∫–æ–π —Å–∏–ª—ã¬ª")]],
    resize_keyboard=True
)

game_keyboard = ReplyKeyboardMarkup(
    keyboard=[[KeyboardButton(text="–ó–∞–ø–∏—Å–∞—Ç—å—Å—è ¬´–ò–≥—Ä–∞ INTEGRA¬ª")]],
    resize_keyboard=True
)

consultation_keyboard = ReplyKeyboardMarkup(
    keyboard=[[KeyboardButton(text="–ó–∞–ø–∏—Å–∞—Ç—å—Å—è ¬´–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è¬ª")]],
    resize_keyboard=True
)
pay_keyboard = ReplyKeyboardMarkup(
    keyboard=[[KeyboardButton(text="–û–ø–ª–∞—Ç–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π")]],
    resize_keyboard=True
)

# –°–ª–æ–≤–∞—Ä—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —É—Å–ª—É–≥–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
user_context = {}


# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start
@dp.message(CommandStart())
async def start_handler(message: Message):
    global total_users, user_list

    # –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–ø–∏—Å–æ–∫
    user_data = {"id": message.from_user.id, "name": message.from_user.username or message.from_user.first_name}
    user_list.append(user_data)
    total_users = len(user_list)

    # –£–≤–µ–¥–æ–º–ª—è–µ–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
    users_info = "\n".join([f"UserID: {user['id']} - –ò–º—è: {user['name']}" for user in user_list])
    await notify_admin(f"–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:\n{users_info}\n\n–û–±—â–µ–µ —á–∏—Å–ª–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: {total_users}")
    user_context[message.from_user.id] = None
    await message.answer(
        f"–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é, {message.from_user.first_name}!\n –Ø ‚Äî –≤–∞—à –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –∏ —Å —Ä–∞–¥–æ—Å—Ç—å—é –ø–æ–º–æ–≥—É –Ω–∞–π—Ç–∏ —Ç–æ—Ç —Å–∞–º—ã–π –∫—É—Ä—Å, –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é –∏–ª–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ –æ—Ç –ö–æ—Ä–Ω –¢–∞—Ç—å—è–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–∞–Ω—É—Ç –ø–µ—Ä–≤—ã–º–∏ —à–∞–≥–∞–º–∏ –∫ –≤–∞–∂–Ω—ã–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º –æ—Ç–∫—Ä—ã—Ç–∏—è–º –∏ –Ω–æ–≤—ã–º –æ—â—É—â–µ–Ω–∏—è–º. –•–æ—Ç–∏—Ç–µ —Ä–∞—Å–∫—Ä—ã—Ç—å —Å–≤–æ—é –∂–µ–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å, –Ω–∞—É—á–∏—Ç—å—Å—è –ª—É—á—à–µ –ø–æ–Ω–∏–º–∞—Ç—å —Å–µ–±—è –∏–ª–∏ –≤–µ—Ä–Ω—É—Ç—å –≥–∞—Ä–º–æ–Ω–∏—é –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è? –ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ –∏–º–µ–Ω–Ω–æ —Ç–æ, —á—Ç–æ –≤–∞–º –Ω—É–∂–Ω–æ:\n\n"
        "‚Ä¢ *¬´–ö–£–†–° ¬´–°–ï–ö–†–ï–¢–´ –ñ–ï–ù–°–ö–û–ô –°–ò–õ–´¬ª* - –µ—Å–ª–∏ —Ç—ã —á—É–≤—Å—Ç–≤—É–µ—à—å, —á—Ç–æ —É—Ç—Ä–∞—Ç–∏–ª–∞ —Å–≤—è–∑—å —Å —Å–æ–±–æ–π –∏ –Ω—É–∂–¥–∞–µ—à—å—Å—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫–µ, —Ç–æ —ç—Ç–æ—Ç –∫—É—Ä—Å –ø–æ–º–æ–∂–µ—Ç –Ω–∞–ø–æ–ª–Ω–∏—Ç—å—Å—è —ç–Ω–µ—Ä–≥–∏–µ–π –∏ —Ä–∞—Å–∫—Ä—ã—Ç—å —Å–≤–æ—é –∏—Å—Ç–∏–Ω–Ω—É—é —Å–∏–ª—É —á–µ—Ä–µ–∑ –º–µ–¥–∏—Ç–∞—Ü–∏–∏, –ø—Ä—è–º—ã–µ —ç—Ñ–∏—Ä—ã –∏ –∑–∞–±–æ—Ç–ª–∏–≤—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å. (25 ‚Ç¨).\n\n"
        "‚Ä¢ *¬´–ò–ì–†–ê INTEGRA¬ª* - –µ—Å–ª–∏ —Ö–æ—á–µ—à—å –∏–∑–º–µ–Ω–∏—Ç—å —Å–≤–æ—é —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å –∏ –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –±–ª–æ–∫–æ–≤, (–∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ 200 ‚Ç¨, –≤ –≥—Ä—É–ø–ø–µ 150 ‚Ç¨), –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ online –∏ offline —Ñ–æ—Ä–º–∞—Ç–µ.\n\n"
        "‚Ä¢ *¬´–ö–û–ù–°–£–õ–¨–¢–ê–¶–ò–Ø¬ª* - –µ—Å–ª–∏ —Ç–µ–±–µ –Ω—É–∂–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –ø–æ–Ω–∏–º–∞–Ω–∏–µ, (50 ‚Ç¨ 1 —á–∞—Å), –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ online –∏ offline —Ñ–æ—Ä–º–∞—Ç–µ.\n\n"
        "–î–∞–≤–∞–π—Ç–µ –Ω–∞—á–Ω—ë–º –≤–∞—à –ø—É—Ç—å –∫ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –≥–∞—Ä–º–æ–Ω–∏–∏ –∏ —Å–∞–º–æ–≤—ã—Ä–∞–∂–µ–Ω–∏—é! üíñ\n"
        "–í—ã–±–∏—Ä–∞–π—Ç–µ, —á—Ç–æ –æ—Ç–∫–ª–∏–∫–∞–µ—Ç—Å—è –í–∞—à–µ–º—É –°–µ—Ä–¥—Ü—É ‚¨áÔ∏è",
        parse_mode="Markdown",
        reply_markup=menu_keyboard
    )


# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫
@dp.message(F.text == "–ö—É—Ä—Å ¬´–°–µ–∫—Ä–µ—Ç—ã –∂–µ–Ω—Å–∫–æ–π —Å–∏–ª—ã¬ª")
async def course_handler(message: Message):
    user_context[message.from_user.id] = "–ö—É—Ä—Å"
    await message.answer(
        "–£ –∫–∞–∂–¥–æ–π –∂–µ–Ω—â–∏–Ω—ã –µ—Å—Ç—å 5 —Ä–æ–ª–µ–π: –∫–æ—Ä–æ–ª–µ–≤–∞, –ª—é–±–æ–≤–Ω–∏—Ü–∞, –¥–µ–≤–æ—á–∫–∞, –ø–æ–¥—Ä—É–≥–∞, –º–∞—Ç—å. –ö–æ–≥–¥–∞ —ç—Ç–∏ —Ä–æ–ª–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –±–∞–ª–∞–Ω—Å–µ, –≤—ã —á—É–≤—Å—Ç–≤—É–µ—Ç–µ –≥–∞—Ä–º–æ–Ω–∏—é –∏ —Å—á–∞—Å—Ç—å–µ. –ù–æ, –∫ —Å–æ–∂–∞–ª–µ–Ω–∏—é, –æ—á–µ–Ω—å —á–∞—Å—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ–∫–æ—Å –∏ —Ç–æ–≥–¥–∞ –≤—Å—ë –∏–¥–µ—Ç –Ω–µ —Ç–∞–∫, –∫–∞–∫ –Ω–∞–º –±—ã —Ö–æ—Ç–µ–ª–æ—Å—å‚Ä¶\n\n"
        "–≠—Ç–æ—Ç –∫–∞–Ω–∞–ª —Å–ª—É–∂–∏—Ç –ø—Ä–æ–≤–æ–¥–Ω–∏–∫–æ–º –≤ –≤–∞—à—É –ª—É—á—à—É—é –∂–∏–∑–Ω—å.\n\n"
        "–í–∞—Å –∂–¥—ë—Ç:\n"
        "üîπ 3 –º–µ–¥–∏—Ç–∞—Ü–∏–∏ –Ω–∞ –ø—Ä–∏–Ω—è—Ç–∏–µ —Å–µ–±—è, –ª—é–±–æ–≤—å –∫ —Å–µ–±–µ –∏ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–º.\n"
        "üîπ 3 –ø—Ä—è–º—ã—Ö —ç—Ñ–∏—Ä–∞ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∏ –ø—Ä–æ–∫–∞—á–∫–∏ –∂–µ–Ω—Å–∫–∏—Ö —Ä–æ–ª–µ–π. –ê —Ç–∞–∫–∂–µ —É–±–µ—Ä–µ–º –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—â–∏–µ —É–±–µ–∂–¥–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –≤–∞–º –º–µ—à–∞—é—Ç —Ä–∞—Å—Ç–∏.\n"
        "üîπ –ú–æ—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ –º–µ—Å—è—Ü–∞.\n\n"
        "–ö–æ–≥–¥–∞? 18.11.2024–≥.\n"
        "–°—Ç–æ–∏–º–æ—Å—Ç—å: 25‚Ç¨\n"
        "–§–æ—Ä–º–∞—Ç: –≥—Ä—É–ø–ø–∞ –≤ Telegram\n\n",
    )
    await message.answer("üöÄ–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É ¬´–ó–∞–ø–∏—Å–∞—Ç—å—Å—è¬ª", reply_markup=course_keyboard)


@dp.message(lambda message: message.text == "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è ¬´–°–µ–∫—Ä–µ—Ç—ã –∂–µ–Ω—Å–∫–æ–π —Å–∏–ª—ã¬ª")
async def course_registration_handler(message: Message):
    await message.answer(
        "–û–ø–ª–∞—Ç—É 25 ‚Ç¨ –º–æ–∂–Ω–æ —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø–æ —Å–ª–µ–¥—É—é—â–∏–º —Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º:\n\nüá∫üá¶ –û–ø–ª–∞—Ç–∞ –≤ –£–∫—Ä–∞–∏–Ω–µ\n"
        "üë§ –ü–æ–ª—É—á–∞—Ç–µ–ª—å: –ö–æ—Ä–Ω –¢–µ—Ç—è–Ω–∞ –û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ–≤–Ω–∞\nüè¶ –ë–∞–Ω–∫: Ukrsibbank\nüí≥ IBAN: UA943510050000026204808299625\n"
        "üè∑Ô∏è –ö–æ–¥ –ï–ì–†–ü–û–£: 3161324545\n\nüá®üá≠ –û–ø–ª–∞—Ç–∞ –≤ –®–≤–µ–π—Ü–∞—Ä–∏–∏\nüë§ –ü–æ–ª—É—á–∞—Ç–µ–ª—å: Tetiana Korn\n"
        "üè¶ –ë–∞–Ω–∫: PostFinance\nüí≥ IBAN: CH61 0900 0000 1623 1622 9\nüî§ SWIFT/BIC: POFICHBEXXX\n"
        "üåç –°—Ç—Ä–∞–Ω–∞: Switzerland\n\n üåê –û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ PayPal\nüìß Email: korntani.therapy@gmail.com\n\n"
        "–î—É–±–ª–∏—Ä—É–µ–º –Ω–∏–∂–µ —Å—á–µ—Ç–∞ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞.\n–ü—Ä–∏—à–ª–∏—Ç–µ –∫–≤–∏—Ç–∞–Ω—Ü–∏—é –∏–ª–∏ —Å–∫—Ä–∏–Ω—à–æ—Ç –ø—Ä–æ –æ–ø–ª–∞—Ç—É —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É üôå\n\n"
        "‚úâÔ∏è –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –ø–∏—à–∏—Ç–µ @korntani"
    )
    await message.answer("UA943510050000026204808299625")
    await message.answer("CH6109000000162316229")
    await message.answer("korntani.therapy@gmail.com")


@dp.message(lambda message: message.text == "–ò–≥—Ä–∞ INTEGRA")
async def game_handler(message: Message):
    user_context[message.from_user.id] = "–ò–≥—Ä–∞"
    await message.answer(
        "‚ú® –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –∏–≥—Ä–∞ INTEGRA ‚Äî —ç—Ç–æ —Ç–≤–æ–π –∫–≤–∞–Ω—Ç–æ–≤—ã–π —Å–∫–∞—á–æ–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å, –≥–¥–µ –∂–µ–ª–∞–Ω–∏—è –¥–æ—Å—Ç–∏–∂–∏–º—ã.\n\n"
        "üîπ –î–ª—è —á–µ–≥–æ –∏–≥—Ä–∞?\n"
        "–û–Ω–∞ –ø–æ–º–æ–∂–µ—Ç —Ç–µ–±–µ –≤—ã–π—Ç–∏ –∑–∞ —Ä–∞–º–∫–∏ –ø—Ä–∏–≤—ã—á–Ω–æ–≥–æ –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è, –æ—Å–≤–æ–±–æ–¥–∏—Ç—å—Å—è –æ—Ç –±–ª–æ–∫–æ–≤ –∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—â–∏—Ö —É–±–µ–∂–¥–µ–Ω–∏–π, –∞ —Ç–∞–∫–∂–µ –∏—Å—Ü–µ–ª–∏—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∏ —Ç—Ä–∞–≤–º—ã –ø—Ä–æ—à–ª–æ–≥–æ.\n\n"
        "üîπ –ß—Ç–æ –∂–¥–µ—Ç –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ?\n"
        "–¢—ã –ø—Ä–æ–π–¥–µ—à—å —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—é –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö ‚Äî —Ç–µ–ª–æ, —ç–º–æ—Ü–∏–∏, —Ä–∞–∑—É–º ‚Äî –ø–æ–¥ —á—É—Ç–∫–∏–º —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ–º –º–∞—Å—Ç–µ—Ä–∞.\n\n"
        "üîπ –ß—Ç–æ –≤ –∏—Ç–æ–≥–µ?\n"
        "–ü–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞—è —Å–≤–æ—é –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é ¬´–º–∞—Ç—Ä–∏—Ü—É¬ª, —Ç—ã —Å–æ–∑–¥–∞—à—å –Ω–æ–≤—É—é –≤–µ—Ç–∫—É —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏, –≥–¥–µ —Ü–µ–ª–∏ –∏ –º–µ—á—Ç—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∏ –¥–æ—Å—Ç–∏–∂–∏–º—ã–º–∏!"
        "–ò–≥—Ä–∞ INTEGRA –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ online –∏ offline —Ñ–æ—Ä–º–∞—Ç–µ.\n\n",
    )
    await message.answer("–î–ª—è –∑–∞–ø–∏—Å–∏ –Ω–∞ –∏–≥—Ä—É –∂–º–∏—Ç–µ ¬´–ó–∞–ø–∏—Å–∞—Ç—å—Å—è¬ª", reply_markup=game_keyboard)


@dp.message(lambda message: message.text == "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è ¬´–ò–≥—Ä–∞ INTEGRA¬ª")
async def course_registration_handler(message: Message):
    await message.answer(
        "–û–ø–ª–∞—Ç—É 200‚Ç¨ (–∏–≥—Ä–∞ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ) / 150‚Ç¨ (–∏–≥—Ä–∞ –≤ –≥—Ä—É–ø–ø–µ) –º–æ–∂–Ω–æ —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø–æ —Å–ª–µ–¥—É—é—â–∏–º —Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º:\n\nüá∫üá¶ –û–ø–ª–∞—Ç–∞ –≤ –£–∫—Ä–∞–∏–Ω–µ\n"
        "üë§ –ü–æ–ª—É—á–∞—Ç–µ–ª—å: –ö–æ—Ä–Ω –¢–µ—Ç—è–Ω–∞ –û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ–≤–Ω–∞\nüè¶ –ë–∞–Ω–∫: Ukrsibbank\nüí≥ IBAN: UA943510050000026204808299625\n"
        "üè∑Ô∏è –ö–æ–¥ –ï–ì–†–ü–û–£: 3161324545\n\nüá®üá≠ –û–ø–ª–∞—Ç–∞ –≤ –®–≤–µ–π—Ü–∞—Ä–∏–∏\nüë§ –ü–æ–ª—É—á–∞—Ç–µ–ª—å: Tetiana Korn\n"
        "üè¶ –ë–∞–Ω–∫: PostFinance\nüí≥ IBAN: CH61 0900 0000 1623 1622 9\nüî§ SWIFT/BIC: POFICHBEXXX\n"
        "üåç –°—Ç—Ä–∞–Ω–∞: Switzerland\n\n üåê –û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ PayPal\nüìß Email: korntani.therapy@gmail.com\n\n"
        "–î—É–±–ª–∏—Ä—É–µ–º –Ω–∏–∂–µ —Å—á–µ—Ç–∞ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞.\n–ü—Ä–∏—à–ª–∏—Ç–µ –∫–≤–∏—Ç–∞–Ω—Ü–∏—é –∏–ª–∏ —Å–∫—Ä–∏–Ω—à–æ—Ç –ø—Ä–æ –æ–ø–ª–∞—Ç—É —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É üôå\n\n"
        "‚úâÔ∏è –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –ø–∏—à–∏—Ç–µ @korntani"
    )
    await message.answer("UA943510050000026204808299625")
    await message.answer("CH6109000000162316229")
    await message.answer("korntani.therapy@gmail.com")


@dp.message(F.text == "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è")
async def consultation_handler(message: Message):
    user_context[message.from_user.id] = "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è"
    await message.answer(
        "üå∏ –Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ –∏ –≥–ª—É–±–∏–Ω–Ω–æ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å –∑–∞–ø—Ä–æ—Å–æ–º, —á—Ç–æ–±—ã —Ç—ã —Å–º–æ–≥–ª–∞ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å—Å—è –æ—Ç –Ω–µ–≥–∞—Ç–∏–≤–∞ –∏ –∑–∞–ª–æ–∂–∏—Ç—å –æ—Å–Ω–æ–≤—É –¥–ª—è —Å—á–∞—Å—Ç–ª–∏–≤–æ–π, –Ω–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–π –∂–∏–∑–Ω–∏.\n\n"
        "–ò—Å–ø–æ–ª—å–∑—É—é —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –º–∏–∫—Å –º–µ—Ç–æ–¥–æ–≤ ‚Äî –æ—Ç –≥–µ—à—Ç–∞–ª—å—Ç-—Ç–µ—Ä–∞–ø–∏–∏ –∏ —ç–Ω–µ—Ä–≥–æ–ø—Ä–∞–∫—Ç–∏–∫ –¥–æ –ú–ê–ö-–∫–∞—Ä—Ç –∏ –º–µ–¥–∏—Ç–∞—Ü–∏–π. \n\n"
        "üìà –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ—Å—Ç–∏—á—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±—ã—Å—Ç—Ä–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ.\n"
        "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ online –∏ offline —Ñ–æ—Ä–º–∞—Ç–µ.\n",
    )
    await message.answer("–ì–æ—Ç–æ–≤–∞ –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º? –ñ–º–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É ¬´–ó–∞–ø–∏—Å–∞—Ç—å—Å—è¬ª –∏ –∂–¥—É —Ç–µ–±—è –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é!",
                         reply_markup=consultation_keyboard)


@dp.message(F.text == "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è ¬´–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è¬ª")
async def consultation_registration_handler(message: Message):
    await message.answer(
        "–û–ø–ª–∞—Ç—É 50‚Ç¨ (–∑–∞ 1 —á–∞—Å) –º–æ–∂–Ω–æ —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø–æ —Å–ª–µ–¥—É—é—â–∏–º —Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º:\n\nüá∫üá¶ –û–ø–ª–∞—Ç–∞ –≤ –£–∫—Ä–∞–∏–Ω–µ\n"
        "üë§ –ü–æ–ª—É—á–∞—Ç–µ–ª—å: –ö–æ—Ä–Ω –¢–µ—Ç—è–Ω–∞ –û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ–≤–Ω–∞\nüè¶ –ë–∞–Ω–∫: Ukrsibbank\nüí≥ IBAN: UA943510050000026204808299625\n"
        "üè∑Ô∏è –ö–æ–¥ –ï–ì–†–ü–û–£: 3161324545\n\nüá®üá≠ –û–ø–ª–∞—Ç–∞ –≤ –®–≤–µ–π—Ü–∞—Ä–∏–∏\nüë§ –ü–æ–ª—É—á–∞—Ç–µ–ª—å: Tetiana Korn\n"
        "üè¶ –ë–∞–Ω–∫: PostFinance\nüí≥ IBAN: CH61 0900 0000 1623 1622 9\nüî§ SWIFT/BIC: POFICHBEXXX\n"
        "üåç –°—Ç—Ä–∞–Ω–∞: Switzerland\n\n üåê –û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ PayPal\nüìß Email: korntani.therapy@gmail.com\n\n"
        "–î—É–±–ª–∏—Ä—É–µ–º –Ω–∏–∂–µ —Å—á–µ—Ç–∞ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞.\n–ü—Ä–∏—à–ª–∏—Ç–µ –∫–≤–∏—Ç–∞–Ω—Ü–∏—é –∏–ª–∏ —Å–∫—Ä–∏–Ω—à–æ—Ç –ø—Ä–æ –æ–ø–ª–∞—Ç—É —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É üôå\n\n"
        "‚úâÔ∏è –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –ø–∏—à–∏—Ç–µ @korntani"
    )
    await message.answer("UA943510050000026204808299625")
    await message.answer("CH6109000000162316229")
    await message.answer("korntani.therapy@gmail.com")


# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–û–ø–ª–∞—Ç–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è"
@dp.message(F.text == "–û–ø–ª–∞—Ç–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è")
async def event_payment_handler(message: Message):
    user_context[message.from_user.id] = "–û–ø–ª–∞—Ç–∞"

    # –ü–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º–∏ –¥–ª—è –æ–ø–ª–∞—Ç—ã
    await message.answer(
        "–û–ø–ª–∞—Ç—É –º–æ–∂–Ω–æ —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø–æ —Å–ª–µ–¥—É—é—â–∏–º —Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º:\n\n"
        "üá∫üá¶ –û–ø–ª–∞—Ç–∞ –≤ –£–∫—Ä–∞–∏–Ω–µ\n"
        "üë§ –ü–æ–ª—É—á–∞—Ç–µ–ª—å: –ö–æ—Ä–Ω –¢–µ—Ç—è–Ω–∞ –û–ª–µ–∫—Å–∞–Ω–¥—Ä—ñ–≤–Ω–∞\n"
        "üè¶ –ë–∞–Ω–∫: Ukrsibbank\n"
        "üí≥ IBAN: UA943510050000026204808299625\n"
        "üè∑Ô∏è –ö–æ–¥ –ï–ì–†–ü–û–£: 3161324545\n\n"
        "üá®üá≠ –û–ø–ª–∞—Ç–∞ –≤ –®–≤–µ–π—Ü–∞—Ä–∏–∏\n"
        "üë§ –ü–æ–ª—É—á–∞—Ç–µ–ª—å: Tetiana Korn\n"
        "üè¶ –ë–∞–Ω–∫: PostFinance\n"
        "üí≥ IBAN: CH61 0900 0000 1623 1622 9\n"
        "üî§ SWIFT/BIC: POFICHBEXXX\n"
        "üåç –°—Ç—Ä–∞–Ω–∞: Switzerland\n\n"
        "üåê –û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ PayPal\n"
        "üìß Email: korntani.therapy@gmail.com\n\n"
        "–î—É–±–ª–∏—Ä—É–µ–º –Ω–∏–∂–µ —Å—á–µ—Ç–∞ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞.\n"
        "–ü—Ä–∏—à–ª–∏—Ç–µ –∫–≤–∏—Ç–∞–Ω—Ü–∏—é –∏–ª–∏ —Å–∫—Ä–∏–Ω—à–æ—Ç –ø—Ä–æ –æ–ø–ª–∞—Ç—É, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É üôå\n\n"
        "‚úâÔ∏è –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –ø–∏—à–∏—Ç–µ @korntani"
    )

    # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å —Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º–∏ –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
    await message.answer("UA943510050000026204808299625")
    await message.answer("CH61 0900 0000 1623 1622 9")
    await message.answer("korntani.therapy@gmail.com")

    # –ó–∞–ø—Ä–æ—Å –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É —Ñ–∞–π–ª–∞ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
    await message.answer(
        "–û—Ç–ø—Ä–∞–≤—å—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –∫–≤–∏—Ç–∞–Ω—Ü–∏—é –∏–ª–∏ —Å–∫—Ä–∏–Ω—à–æ—Ç –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã.",
        reply_markup=pay_keyboard
    )


@dp.message(lambda message: message.text == "–ö–æ–Ω—Ç–∞–∫—Ç—ã", )
async def game_handler(message: Message):
    await message.answer(
        "üì≤ –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä—ã: +380672400799\n\n üìû –ó–≤–æ–Ω–∏—Ç—å: +41784228563")


# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –∏ —Ñ–æ—Ç–æ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–µ–π –ø–æ —É—Å–ª—É–≥–∞–º
@dp.message(F.document | F.photo)
async def handle_any_files(message: Message):
    service = user_context.get(message.from_user.id, "–î—Ä—É–≥–∏–µ")  # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
    folder_path = os.path.join("downloads", service)
    os.makedirs(folder_path, exist_ok=True)

    if message.document:
        file_id = message.document.file_id
        file_name = message.document.file_name
    elif message.photo:
        file_id = message.photo[-1].file_id
        file_name = f"{file_id}.jpg"

    file_path = os.path.join(folder_path, file_name)

    try:
        # –ü–æ–ª—É—á–∞–µ–º —Ñ–∞–π–ª
        file = await bot.get_file(file_id)
        await bot.download_file(file.file_path, file_path)

        # –ë–ª–∞–≥–æ–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–π —É—Å–ª—É–≥–∏
        if service == "–ö—É—Ä—Å":
            await message.answer(
                "–ë–ª–∞–≥–æ–¥–∞—Ä–∏–º –∑–∞ —É—á–∞—Å—Ç–∏–µ –≤ –∫—É—Ä—Å–µ ¬´–°–µ–∫—Ä–µ—Ç—ã –∂–µ–Ω—Å–∫–æ–π —Å–∏–ª—ã¬ª! üíñ\n –í–∞—à —Ñ–∞–π–ª —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω.\n –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –Ω–∞—à–µ–π –≥—Ä—É–ø–ø–µ, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –∫ –∂–µ–Ω—Å–∫–æ–π –≥–∞—Ä–º–æ–Ω–∏–∏ ‚û°Ô∏è https://t.me/+nZ7Z13R5rm1mZGYy")
        elif service == "–ò–≥—Ä–∞":
            await message.answer(
                "–ë–ª–∞–≥–æ–¥–∞—Ä—é –∑–∞ –¥–æ–≤–µ—Ä–∏–µ üíû\n –î–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è –¥–∞—Ç—ã, –≤—Ä–µ–º–µ–Ω–∏ –∏ —Ñ–æ—Ä–º–∞—Ç–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –ò–≥—Ä—ã ¬´INTEGRA¬ª –Ω–∞–ø–∏—à–∏—Ç–µ @korntani")
        elif service == "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è":
            await message.answer(
                "–ë–ª–∞–≥–æ–¥–∞—Ä—é –∑–∞ –¥–æ–≤–µ—Ä–∏–µ üíû\n –î–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è –¥–∞—Ç—ã –∏ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –Ω–∞–ø–∏—à–∏—Ç–µ @korntani")
        elif service == "–û–ø–ª–∞—Ç–∞":
            await message.answer(
                "–ë–ª–∞–≥–æ–¥–∞—Ä—é –∑–∞ –¥–æ–≤–µ—Ä–∏–µ üíû –î–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–∞–ø–∏—à–∏—Ç–µ @korntan")
        else:
            await message.answer("–ë–ª–∞–≥–æ–¥–∞—Ä–∏–º –∑–∞ –¥–æ–≤–µ—Ä–∏–µ üíû –í–∞—à —Ñ–∞–π–ª —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω!")

    except Exception as e:
        await message.answer(f"–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞: {e}")


# –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞
async def main():
    await dp.start_polling(bot)


# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
if __name__ == "__main__":
    asyncio.run(main())